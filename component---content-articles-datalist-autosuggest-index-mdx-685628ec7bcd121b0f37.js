(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"7Dn1":function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return m})),t.d(a,"default",(function(){return j}));var n=t("itl6"),s=(t("DaAx"),t("O7St")),c=t("mc/u"),b=t("ipew"),p=t("ysD2"),o=t("zKDO"),m={},r={_frontmatter:m},i=c.a;function j(e){var a=e.components,t=Object(n.a)(e,["components"]);return Object(s.b)(i,Object.assign({},r,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"table-of-contents",style:{position:"relative"}},"Table of Contents",Object(s.b)("a",Object.assign({parentName:"h2"},{href:"#table-of-contents","aria-label":"table of contents permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("div",{className:"toc"}),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object.assign({parentName:"p"},{href:"#use-case"}),"Use Case"))),Object(s.b)("li",{parentName:"ul"},Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object.assign({parentName:"p"},{href:"#solution-html-datalist"}),"Solution: HTML ",Object(s.b)("code",Object.assign({parentName:"a"},{className:"language-text"}),"<datalist>"))),Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",Object.assign({parentName:"li"},{href:"#version-1"}),"Version 1")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",Object.assign({parentName:"li"},{href:"#version-2"}),"Version 2")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",Object.assign({parentName:"li"},{href:"#version-3"}),"Version 3")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",Object.assign({parentName:"li"},{href:"#version-4"}),"Version 4")))),Object(s.b)("li",{parentName:"ul"},Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object.assign({parentName:"p"},{href:"#takeaways"}),"Takeaways"))),Object(s.b)("li",{parentName:"ul"},Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object.assign({parentName:"p"},{href:"#other-use-cases"}),"Other Use Cases")))),Object(s.b)("undefined",null),Object(s.b)("h2",{id:"use-case",style:{position:"relative"}},"Use Case",Object(s.b)("a",Object.assign({parentName:"h2"},{href:"#use-case","aria-label":"use case permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"For a search feature, we’re storing the 100 most recently used (“MRU”) search\nterms. In the search box, we want to auto suggest based on the MRU terms, but\nnot restrict the input to just those terms."),Object(s.b)(o.b,{mdxType:"Search"}),Object(s.b)("h2",{id:"solution-html-datalist",style:{position:"relative"}},"Solution: HTML ",Object(s.b)("code",Object.assign({parentName:"h2"},{className:"language-text"}),"<datalist>"),Object(s.b)("a",Object.assign({parentName:"h2"},{href:"#solution-html-datalist","aria-label":"solution html datalist permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"Until recently, I didn’t know about the ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist"}),Object(s.b)("code",Object.assign({parentName:"a"},{className:"language-text"}),"<datalist>"))," element until I\nread ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://www.peterbe.com/plog/datalist-looks-great-on-mobile-devices"}),"Peter Bengtsson’s article"),". ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist"}),"According to MDN"),":"),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"The HTML ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"<datalist>")," element contains a set of ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"<option>")," elements that\nrepresent the permissible or recommended options available to choose from\nwithin other controls.")),Object(s.b)("p",null,"Sounds exactly like what we need."),Object(s.b)("h3",{id:"version-1",style:{position:"relative"}},"Version 1",Object(s.b)("a",Object.assign({parentName:"h3"},{href:"#version-1","aria-label":"version 1 permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"Let’s start with a basic implementation:"),Object(s.b)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," setTerm",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," React",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," setMruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," React",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"React",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"useEffect"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"fetch"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"https://random-word-api.herokuapp.com/word?number=100&swear=0"'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"then"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"response"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," response",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"json"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"then"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"data"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"setMruTerms"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"main",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"form\n      autoComplete",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"off"'),"\n      onSubmit",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"e"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n        e",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"preventDefault"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n        ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," term ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," e",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"currentTarget",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"value",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n        ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"if")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!==")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"          ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"setTerm"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"          ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"setMruTerms"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"..."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"new")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Set"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"..."),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"slice"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token number"}),"0"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token number"}),"100"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"        ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"label htmlFor",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"term"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"Search term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"label",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"input list",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"mru-terms"')," id",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"term"')," name",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"term"')," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),"datalist id",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"mru-terms"')," key",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"map"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"term"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"(")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"          ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),"option key",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")," value",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"/"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"/"),"datalist",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"button",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"Search",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"button",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"form",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"p",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"Submitted term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"p",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"main",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"We keep track of two pieces of context data: what the user submits (",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"term"),"),\nand the list of MRU terms (",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms"),")."),Object(s.b)("li",{parentName:"ol"},"We initialize ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms")," when the component is first rendered. In a real app,\nthis can be fetched from a service, upstream app state, or ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"localStorage"),"."),Object(s.b)("li",{parentName:"ol"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<option>")," elements of the ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<datalist>")," are generated from ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms"),". Notice\nthe entire ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<datalist>")," component is replaced every time ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"term")," changes since\nwe bind it to the ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"key")," prop.",Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul"},"You can think of ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms")," as a detail of ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"term"),", since every time ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"term"),"\nchanges, we are generating a new array of associated ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms"),"."),Object(s.b)("li",{parentName:"ul"},"As a bonus, this also works around a longstanding ",Object(s.b)("a",Object.assign({parentName:"li"},{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1474137"}),"Firefox bug")," with\ndynamic datalists."))),Object(s.b)("li",{parentName:"ol"},"Each time the user performs a search, both ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"term")," and ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"mruTerms")," are updated\n(and persisted in a real app).")),Object(s.b)(b.a,{as:"h4",sandbox:"datalist-autosuggest-v1-nq0dz",title:"v1 demo of datalist",mdxType:"CodeSandbox"}),Object(s.b)("h3",{id:"version-2",style:{position:"relative"}},"Version 2",Object(s.b)("a",Object.assign({parentName:"h3"},{href:"#version-2","aria-label":"version 2 permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"With very little code, our autosuggest feature already works pretty well. Let’s\nrefactor our code so all context data is handled within a single object:"),Object(s.b)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"useInitialize")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," mruTerms ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," dispatch",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," React",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"useReducer"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"reducer",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," initialData",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"  React",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"useEffect"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"fetch"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"https://random-word-api.herokuapp.com/word?number=100&swear=0"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"then"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"response"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," response",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"json"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"then"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"payload"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"dispatch"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," type",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"init"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," payload ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," actions ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"updateTerm"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"payload"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"dispatch"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," type",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"updateTerm"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," payload ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," actions ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," initialData ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"reducer")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," type",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," payload ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," mruTerms ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," data",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"switch")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"type",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"case")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"init"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," payload ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"case")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"updateTerm"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"if")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"payload",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"===")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," data",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n        term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," payload",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n        mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Set"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"payload",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"slice"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"0"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"100"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"default"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," data",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"Instead of multiple ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"useState"),"s, we consolidate into a single ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"useReducer"),"."),Object(s.b)("li",{parentName:"ol"},"We move most of the business logic into a custom hook, simplifying the actual\ncomponent.")),Object(s.b)(b.a,{as:"h4",sandbox:"datalist-autosuggest-v2-rutk0",title:"v1 demo of datalist",mdxType:"CodeSandbox"}),Object(s.b)("h3",{id:"version-3",style:{position:"relative"}},"Version 3",Object(s.b)("a",Object.assign({parentName:"h3"},{href:"#version-3","aria-label":"version 3 permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"For our purposes, the search terms “ice cream”, “Ice Cream”, and ” ICE CREAM ”\nare all considered equivalents. We want to store the last version used (minus\nthe surrounding spaces) without duplicates in ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"mruTerms"),"."),Object(s.b)("p",null,"Let’s create couple helper functions first:"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"addMruTerm")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," term"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"reduce"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"unique",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," item"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>"),"\n        unique",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"some"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"e"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trimLower"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"e",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"===")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trimLower"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"item",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n          ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"?")," unique\n          ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"unique",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," item",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"slice"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"0"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"100"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"trimLower")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"term"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"toLowerCase"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("p",null,"Then we change how we update ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"mruTerms")," in the reducer:"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"addMruTerm"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," payload",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)(b.a,{as:"h4",sandbox:"datalist-autosuggest-v3-hc8hr",title:"v1 demo of datalist",mdxType:"CodeSandbox"}),Object(s.b)("h3",{id:"version-4",style:{position:"relative"}},"Version 4",Object(s.b)("a",Object.assign({parentName:"h3"},{href:"#version-4","aria-label":"version 4 permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"Our autosuggest feature is starting to work nicely. You’ll notice that Chrome\nand Firefox sort suggestions in the ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"mruTerms")," array order. I think a better\nexperience would be to sort by three major sections. For example, if the search\nterm is “cr”:"),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"First, suggestions that begin with the current search term, e.g.\n”",Object(s.b)("mark",null,"cr"),"anial”, ”",Object(s.b)("mark",null,"cr"),"eamery”."),Object(s.b)("li",{parentName:"ol"},"Next, suggestions that contain words that start with the current search, e.g.\n“heavy ",Object(s.b)("mark",null,"cr"),"ate”, “ice ",Object(s.b)("mark",null,"cr"),"eam”."),Object(s.b)("li",{parentName:"ol"},"Finally, suggestions that contain the search term, anywhere, e.g.\n“dis",Object(s.b)("mark",null,"cr"),"eet”, “s",Object(s.b)("mark",null,"cr"),"ibe”.")),Object(s.b)("p",null,"Within each section, we can further sort alphabetically."),Object(s.b)("p",null,"In order to accomplish this, we need to update ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"<datalist>")," as we type the\nsearch term. This means we need to keep track of couple additional pieces of\ncontext data: ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"draft")," and ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"sortedMruTerms"),":"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," initialData ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," draft",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," sortedMruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("p",null,"We also add another helper function ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"sortMruTerms"),", and adjust the ",Object(s.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"reducer"),"\naccordingly:"),Object(s.b)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"reducer")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," type",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," payload ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," draft",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," mruTerms ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," data",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"switch")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"type",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"case")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"init"'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"..."),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," payload",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," sortedMruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," payload ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"case")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"updateDraft"'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"..."),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," payload",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        sortedMruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"sortMruTerms"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," payload",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"case")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"updateTerm"'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"if")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"===")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"return")," data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"return")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"..."),"data",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        term",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"trim"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"        mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"addMruTerm"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"default"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),":"),"\n      ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," data",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function-variable function"}),"sortMruTerms")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"mruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," term"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),"  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," partial ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trimLower"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"if")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"partial ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"===")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'""'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"let")," terms ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"mruTerms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"let")," sorted ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"sortFilters"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"partial",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"forEach"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"filter"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    sorted ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"sorted",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"..."),"terms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"filter"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"filter",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"sort"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    terms ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," terms",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"filter"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"t"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!"),"sorted",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"includes"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"t",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," sorted",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"sortFilters")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"partial"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"t"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"trimLower"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"t",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"startsWith"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"partial",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"t"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"RegExp"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token template-string"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),"\\\\b"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token interpolation"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),"partial",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"i"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"test"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"t",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"t"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"RegExp"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"partial",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"i"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"test"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"t",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"Initialize ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"sortedMruTerms"),"."),Object(s.b)("li",{parentName:"ol"},"Add action to handle ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"updateDraft"),", which is called each time the search term\nchanges."),Object(s.b)("li",{parentName:"ol"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"updateTerm")," no longer requires a payload, since we can calculate new context\nvalues based on ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"draft"),"."),Object(s.b)("li",{parentName:"ol"},"Make some tweaks to the custom hook (I trust you can figure this part out on\nyour own).")),Object(s.b)("p",null,"Lastly, some minor adjustments in the JSX and we’re done:"),Object(s.b)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",Object.assign({parentName:"div"},{style:{counterReset:"linenumber NaN"},className:"language-js line-numbers"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"input\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  value",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  onChange",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"e"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," actions",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"updateDraft"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"e",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),"currentTarget",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),"value",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),"  list",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"mru-terms"'),"\n  id",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"term"'),"\n  name",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"term"'),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),"datalist id",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token string"}),'"mru-terms"')," key",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"draft",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),Object(s.b)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"sortedMruTerms",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"map"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token parameter"}),"term"),Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"(")),"    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"option key",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," value",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"term",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"datalist",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")),Object(s.b)("span",Object.assign({parentName:"pre"},{"aria-hidden":"true",className:"line-numbers-rows",style:{whiteSpace:"normal",width:"auto",left:"0"}}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"}),Object(s.b)("span",{parentName:"span"})))),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"Convert the search term ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<input>")," into a controlled component, binding its\nvalue to ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"draft")," and event handling to ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"updateDraft"),"."),Object(s.b)("li",{parentName:"ol"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<datalist>")," is now replaced every time ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"draft")," changes, and its values come\nfrom ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"sortedMruTerms"),".")),Object(s.b)(b.a,{as:"h4",sandbox:"datalist-autosuggest-v4-6ux86",title:"v1 demo of datalist",mdxType:"CodeSandbox"}),Object(s.b)("p",null,"As you can see, by abstracting the logic out from the component, we can easily\ntweak the behavior while minimizing changes to the component itself. We can also\ntest the utility functions independently. Composition FTW 🙌."),Object(s.b)("p",null,"Can you think of other improvements to this feature? Fork one of the\nCodeSandboxes and see what you come up with."),Object(s.b)("h2",{id:"takeaways",style:{position:"relative"}},"Takeaways",Object(s.b)("a",Object.assign({parentName:"h2"},{href:"#takeaways","aria-label":"takeaways permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"For auto suggestions or completions, try the built-in ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"<datalist>")," element\nfirst."),Object(s.b)("li",{parentName:"ul"},"You can dynamically generate the datalist options based on events."),Object(s.b)("li",{parentName:"ul"},"Abstract out as much logic as possible from your components for composability,\ntestability, and agility.")),Object(s.b)("h2",{id:"other-use-cases",style:{position:"relative"}},"Other Use Cases",Object(s.b)("a",Object.assign({parentName:"h2"},{href:"#other-use-cases","aria-label":"other use cases permalink",className:"header-link after"}),Object(s.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(s.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))))),Object(s.b)("p",null,"It occurred to me that this technique can be used in situations where you want\nto normalize data as much as possible, while still allowing the user to freely\nenter anything they like. ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"../workplace-justice-ally/"}),"In a recent article"),", I talked about the issue\nof HR asking for personal pronouns. HR would like the data to be as consistent\nas possible, but the right thing to do is to allow people to enter whatever they\nwant. Here’s a possible implementation that fulfills both requirements:"),Object(s.b)(p.a,{mdxType:"Pronoun"}))}j.isMDXComponent=!0},"mc/u":function(e,a,t){"use strict";var n=t("itl6"),s=t("iQNK"),c=t("7oih"),b=t("Al62"),p=function(e,a){var t=Object(b.d)(e),n="Published on "+t;if(a){var s=Object(b.d)(a);t=t+" (updated "+s+")",n=[n,"Updated on "+s].join(". ")}return[t,n]},o={color:"font.body.0",fontSize:"sm"};a.a=function(e){var a=e.children,t=Object(n.a)(e,["children"]),b=t.pageContext,m=b.frontmatter,r=m.title,i=m.published,j=m.updated,O=b.srcPath,N=p(i,j),l=N[0],u=N[1];return Object(s.c)(c.a,t,Object(s.c)("article",null,Object(s.c)("h1",{sx:{color:"font.articleH1"}},r),Object(s.c)("p",null,Object(s.c)("a",{href:"https://github.com/gsong/personal-site/commits/main"+O,sx:o,className:"link-hover","aria-label":u},l)),a))}}}]);
//# sourceMappingURL=component---content-articles-datalist-autosuggest-index-mdx-685628ec7bcd121b0f37.js.map