<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45 'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.618rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.33471rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.21225rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.90825rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'system',-apple-system,'BlinkMacSystemFont','Avenir Next','Helvetica Neue','Segoe UI','Helvetica','Lucida Grande','Arial',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.86558rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/styles.4f43bc29046fe501af17.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.24.23"/><title data-react-helmet="true">React.useReducer Reducer Patterns, Part 3 | George Song‚Äôs Website</title><meta data-react-helmet="true" name="description" content="There&#x27;s more than one way to write reducers, part 3."/><meta data-react-helmet="true" property="og:title" content="React.useReducer Reducer Patterns, Part 3"/><meta data-react-helmet="true" property="og:description" content="There&#x27;s more than one way to write reducers, part 3."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@zukefresh"/><meta data-react-helmet="true" name="twitter:title" content="React.useReducer Reducer Patterns, Part 3"/><meta data-react-helmet="true" name="twitter:description" content="There&#x27;s more than one way to write reducers, part 3."/><meta data-react-helmet="true" name="keywords" content="javascript, react"/><link rel="icon" href="/favicon-32x32.png?v=7dac84e604769a2b765823229eec619b" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7dac84e604769a2b765823229eec619b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7dac84e604769a2b765823229eec619b"/><link rel="alternate" type="application/rss+xml" title="George Song‚Äôs Articles" href="/articles/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-819ee5be2e0c92db4d23.js"/><link as="script" rel="preload" href="/styles-24c541b6ac347bae38f1.js"/><link as="script" rel="preload" href="/app-85062645ae4eb1e74666.js"/><link as="script" rel="preload" href="/component---content-articles-reducer-patterns-part-3-mdx-d64d9e4b510e3a91e7df.js"/><link as="fetch" rel="preload" href="/page-data/articles/reducer-patterns/part-3/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/2986802049.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/2986802049.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/436707970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/436707970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="w6zcm7">body{color:text;background-color:var(--theme-ui-colors-background-0,hsl(44,87%,98%));background-color:var(--theme-ui-colors-background-1,hsl(44,87%,94%));background-color:var(--theme-ui-colors-background-2,hsl(44,100%,87%));}</style><style data-emotion-css="1d7m1w5">*{box-sizing:border-box;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1qb2rkd">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}body{background-color:var(--theme-ui-colors-background-0,hsl(44,87%,98%));color:var(--theme-ui-colors-font-body-1,hsl(192,81%,14%));margin:auto;max-width:600px;width:95vw;}a{color:var(--theme-ui-colors-link,hsl(205,80%,40%));-webkit-text-decoration:none;text-decoration:none;}a:focus,a:hover{-webkit-text-decoration:underline;text-decoration:underline;}button{background-color:var(--theme-ui-colors-button-0,hsl(205,50%,50%));border:0;border-radius:0.3em;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);color:white;padding:0.5rem 1rem;}button:active{box-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);}button:focus,button:hover{background-color:var(--theme-ui-colors-button-1,hsl(205,80%,40%));cursor:pointer;}.header-link{padding-left:0.5rem;padding-right:0.5rem;}.link-hover:focus,.link-hover:hover{color:var(--theme-ui-colors-link,hsl(205,80%,40%));}code[class*="language-"],pre[class*="language-"]{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Andale Mono","Ubuntu Mono","Courier New",monospace;font-size:clamp(0.75rem,2vw,0.875rem);}.gatsby-highlight{background-color:var(--theme-ui-colors-background-1,hsl(44,87%,94%));border-radius:0.3em;box-shadow:0 1px 2px 0 rgba(0,0,0,0.05);margin:0.5em 0 1.45rem;overflow:auto;padding:1em;}@supports (display:grid){.gatsby-highlight{position:relative;left:50%;right:50%;margin-left:calc((min(100vw,860px) / 2 * -1) + 0px);margin-right:calc((min(100vw,860px) / 2 * -1) + 0px);width:100vw;max-width:860px;}}.gatsby-highlight pre[class*="language-"]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0;}.gatsby-highlight pre[class*="language-"].line-numbers{padding-left:2.8em;}.gatsby-highlight-code-line{background-color:var(--theme-ui-colors-background-2,hsl(44,100%,87%));border-left:0.25em solid hsl(0,100%,80%);display:block;margin-left:-1em;margin-right:-1em;padding-left:0.75em;padding-right:1em;}h2 code[class*="language-"],h3 code[class*="language-"]{background-color:unset;color:unset;padding:0;font-size:inherit;line-height:inherit;}h2 code[class*="language-"]::selection,h3 code[class*="language-"]::selection{background-color:highlight;}li .gatsby-highlight{margin-bottom:calc(1.45rem / 2);}@supports (display:grid){li .gatsby-highlight{margin-left:calc((min(100vw,860px) / 2 * -1) + -0.725rem);}}</style><style data-emotion-css="1ctb7zc">.css-1ctb7zc{margin-top:1rem;margin-bottom:2rem;margin-left:0;margin-right:0;}</style><header class="css-1ctb7zc"><h1><style data-emotion-css="1sl0qb9">.css-1sl0qb9{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--theme-ui-colors-font-body-1,hsl(192,81%,14%));display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.125rem;}.css-1sl0qb9:focus,.css-1sl0qb9:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="link-hover css-1sl0qb9" aria-label="Return to homepage" href="/"><style data-emotion-css="52mbxe">.css-52mbxe{border-radius:50%;max-width:50px;max-height:50px;}</style><div class="css-52mbxe gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:115px;height:115px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAgEAA//aAAwDAQACEAMQAAABnp7Y1upzHIlAg6T/xAAbEAACAgMBAAAAAAAAAAAAAAABAgMRABIhE//aAAgBAQABBQJ20VlnteqwPpWCLjMdmNYJmI//xAAYEQACAwAAAAAAAAAAAAAAAAABEAIRMf/aAAgBAwEBPwEC1HF//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAQIf/aAAgBAgEBPwFbk5//xAAcEAACAgIDAAAAAAAAAAAAAAAAARFhAkESMWL/2gAIAQEABj8CmJejlKdCcI8nbEJWZUaP/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARIUFRYTGR/9oACAEBAAE/IcVsoewFvk/JiNi4/S9ZSwP1hhIYdznUYW44WS4JH//aAAwDAQACAAMAAAAQL/8AA//EABgRAAMBAQAAAAAAAAAAAAAAAAABMRAR/9oACAEDAQE/EKGdZbP/xAAZEQACAwEAAAAAAAAAAAAAAAAAARAhUWH/2gAIAQIBAT8QxF0Vcf/EAB0QAQEAAgMAAwAAAAAAAAAAAAERACExQVFhsdH/2gAIAQEAAT8QMWxM7WjeRpQroicTKfIY3JdzONW20J584d9bpUxChArt94BqADeZcDWXcBm4HfH9z//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/9dee0a9aad2546238052bcc628fd0146/19daf/gs-headshot.jpg 1x,
/static/9dee0a9aad2546238052bcc628fd0146/f6634/gs-headshot.jpg 1.5x,
/static/9dee0a9aad2546238052bcc628fd0146/cd0be/gs-headshot.jpg 2x" /><img loading="lazy" width="115" height="115" srcset="/static/9dee0a9aad2546238052bcc628fd0146/19daf/gs-headshot.jpg 1x,
/static/9dee0a9aad2546238052bcc628fd0146/f6634/gs-headshot.jpg 1.5x,
/static/9dee0a9aad2546238052bcc628fd0146/cd0be/gs-headshot.jpg 2x" src="/static/9dee0a9aad2546238052bcc628fd0146/19daf/gs-headshot.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><style data-emotion-css="qouyfz">.css-qouyfz{margin-left:0.75rem;}</style><div class="css-qouyfz">George Song</div></a></h1></header><main><article><style data-emotion-css="1ejsnnb">.css-1ejsnnb{color:var(--theme-ui-colors-font-articleH1,hsl(331,64%,52%));}</style><h1 class="css-1ejsnnb">React.useReducer Reducer Patterns, Part 3</h1><p><style data-emotion-css="16x22ed">.css-16x22ed{color:var(--theme-ui-colors-font-body-0,hsl(194,14%,40%));font-size:0.875rem;}</style><a href="https://github.com/gsong/personal-site/commits/main/content/articles/reducer-patterns/part-3.mdx" class="link-hover css-16x22ed" aria-label="Published on August 2, 2020">August 2, 2020</a></p><ul class="css-0"><li class="css-0"><a href="/articles/reducer-patterns/part-1/" class="css-0">Part 1: Introduction to <code class="language-text css-0">useReducer</code> and basic reducer patterns</a></li><li class="css-0"><a href="/articles/reducer-patterns/part-2/" class="css-0">Part 2: Reducers with actions</a></li></ul><p class="css-0">So far in parts 1 and 2 of this series, we‚Äôve learned that:</p><ul class="css-0"><li class="css-0">the primary job of a reducer is to produce a new state</li><li class="css-0">dispatched actions can take any shape you want</li></ul><p class="css-0">In part 3, we‚Äôll be looking at the most common pattern of reducers and actions
that you‚Äôll come across in documentation and online examples, and model a state
chart using a reducer.</p><h2 id="table-of-contents" style="position:relative" class="css-0">Table of Contents<a href="#table-of-contents" aria-label="table of contents permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="toc css-0"></div><ul class="css-0"><li class="css-0"><p class="css-0"><a href="#typical-usereducer-pattern" class="css-0">Typical <code class="language-text css-0">useReducer</code> Pattern</a></p></li><li class="css-0"><p class="css-0"><a href="#tightly-coupled-state-values" class="css-0">Tightly Coupled State Values</a></p></li><li class="css-0"><p class="css-0"><a href="#nested-switch-statements" class="css-0">Nested Switch Statements</a></p><ul class="css-0"><li class="css-0"><a href="#initial-hook-state" class="css-0">Initial Hook State</a></li><li class="css-0"><a href="#translate-a-state-chart-to-a-reducer-function" class="css-0">Translate a State Chart to a Reducer Function</a></li><li class="css-0"><a href="#putting-it-all-together" class="css-0">Putting It All Together</a></li></ul></li><li class="css-0"><p class="css-0"><a href="#takeaways" class="css-0">Takeaways</a></p></li></ul><undefined></undefined><h2 id="typical-usereducer-pattern" style="position:relative" class="css-0">Typical <code class="language-text css-0">useReducer</code> Pattern<a href="#typical-usereducer-pattern" aria-label="typical usereducer pattern permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p class="css-0">Most <code class="language-text css-0">React.useReducer</code> examples you encounter dispatch actions that look
something like <code class="language-text css-0">{ type, paylod }</code>, with reducer functions that consists of a
switch statement that matches on <code class="language-text css-0">type</code> and uses the <code class="language-text css-0">payload</code> to calculate the
next state.</p><p class="css-0">Remember the reducer signature is <code class="language-text css-0">(currentState, action) =&gt; nextState</code>. A
<code class="language-text css-0">switch</code> statement based reducer looks like:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> count <span class="token operator">+</span> payload<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;reset&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> initialValue<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">To trigger this reducer, there are two possible actions we can dispatch.</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;reset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div><p class="css-0">We can encapsulate these two possibilities with <a href="https://redux.js.org/basics/actions#action-creators" class="css-0">bound action
creators</a>:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;reset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div><p class="css-0">Action creators are optional‚Äîinstead, you can just dispatch actions directly
where needed. They do offer a much nicer interface for the hook user by hiding
the reducer‚Äôs implementation details.</p><p class="css-0">The complete <code class="language-text css-0">useReducer</code> definition looks like:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> initialValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> count <span class="token operator">+</span> payload<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;reset&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> initialValue<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;reset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">Our hook interface is now <code class="language-text css-0">count</code>, plus the <code class="language-text css-0">add()</code> and <code class="language-text css-0">reset()</code> functions.</p><h3>üë©‚Äçüíª Try It Out</h3><p><button>Load CodeSandbox</button></p><h2 id="tightly-coupled-state-values" style="position:relative" class="css-0">Tightly Coupled State Values<a href="#tightly-coupled-state-values" aria-label="tightly coupled state values permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p class="css-0">Great, so far we‚Äôve explored quite a few reducer and action patterns, but we
haven‚Äôt talked about <em class="css-0">why</em> we use <code class="language-text css-0">useReducer</code>. In fact, you can express the
previous example more clearly as a <code class="language-text css-0">useState</code> hook:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> initialValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div><h3>üë©‚Äçüíª Try It Out</h3><p><button>Load CodeSandbox</button></p><p class="css-0">The reason is because <code class="language-text css-0">useState</code> optimizes the use case of managing a single
state value. This implies that <code class="language-text css-0">useReducer</code>‚Äôs sweet spot is when we have more
than a single state value that we need to keep track of.</p><p class="css-0">What if we want to add an undo function, so we can get back the previous counts?
One way is to keep track of the count history. Instead of just keeping track of
the latest count, our state now looks like:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div><p class="css-0">We update the reducer with the following changes:</p><ul class="css-0"><li class="css-0">Return the current state as-is if we add zero, since this action doesn‚Äôt
change the state.</li><li class="css-0">If we‚Äôre adding any other value, also add the current count to the history
stack.</li><li class="css-0">Add a new case to handle the <code class="language-text css-0">undo</code> action.</li></ul><div class="gatsby-highlight has-highlighted-lines css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> history <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>payload <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> state<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> count <span class="token operator">+</span> payload<span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>history<span class="token punctuation">,</span> count<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>    <span class="token keyword">case</span> <span class="token string">&quot;reset&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> initialState<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">case</span> <span class="token string">&quot;undo&quot;</span><span class="token operator">:</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>history<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> state<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">const</span> lastCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>history<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> lastCount<span class="token punctuation">,</span> history<span class="token operator">:</span> history<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">Lastly we add another bounded action creator to handle <code class="language-text css-0">undo()</code>:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token function-variable function">undo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;undo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div><p class="css-0">Putting it all together:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> history <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>payload <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> state<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> count <span class="token operator">+</span> payload<span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>history<span class="token punctuation">,</span> count<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;reset&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> initialState<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;undo&quot;</span><span class="token operator">:</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>history<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> state<span class="token punctuation">;</span>
      <span class="token keyword">const</span> lastCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>history<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> lastCount<span class="token punctuation">,</span> history<span class="token operator">:</span> history<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> count<span class="token punctuation">,</span> history <span class="token punctuation">}</span><span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;reset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">undo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;undo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">We see that <code class="language-text css-0">count</code> and <code class="language-text css-0">history</code> are tightly coupled. When we add a value, we
update <code class="language-text css-0">count</code> and add the previous count to the <code class="language-text css-0">history</code> stack. When we undo,
we replace <code class="language-text css-0">count</code> by popping the last item from the <code class="language-text css-0">history</code> stack.</p><h3>üë©‚Äçüíª Try It Out</h3><p><button>Load CodeSandbox</button></p><h2 id="nested-switch-statements" style="position:relative" class="css-0">Nested Switch Statements<a href="#nested-switch-statements" aria-label="nested switch statements permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p class="css-0">Did you know you can nest a <code class="language-text css-0">switch</code> statement inside the <code class="language-text css-0">case</code> clause of
another switch statement? Using this technique, you can perform very
sophisticated actions with the <code class="language-text css-0">useReducer</code> hook, especially when coupled with
<code class="language-text css-0">useEffect</code>.</p><p class="css-0">Let‚Äôs make a seemingly simple form with a single input and couple buttons:</p><ul class="css-0"><li class="css-0">The input will only accept <code class="language-text css-0">[A-Za-z]</code> characters</li><li class="css-0">Submit button to POST the input value to an API</li><li class="css-0">Reset button to reset the input value to the last successful submission</li></ul><p class="css-0">Easy peasy, right? That‚Äôs how forms always start out, except when you start
considering:</p><ul class="css-0"><li class="css-0">If input is invalid, display error message and don‚Äôt allow submission.</li><li class="css-0">Don‚Äôt allow submission if input value hasn‚Äôt changed from the previous
submission.</li><li class="css-0">During submission, disable all inputs.</li><li class="css-0">Display submission status.</li><li class="css-0">When submission error occurs, the submit button remains active to allow for
retry.</li></ul><p class="css-0">How would you satisfy all these requirements? Try to capture all the logic
imperatively? Use one of the many React form libraries? I happen to think <a href="https://statecharts.github.io" class="css-0">state
charts</a> are a great way to declaratively satisfy all the requirements.</p><style data-emotion-css="gpkyxx">.css-gpkyxx{display:block;margin:auto;margin-bottom:1.45rem;max-width:283px;}.css-gpkyxx tspan{fill:black;stroke:none;}</style><svg id="mermaid-1596401273945" width="100%" height="100%" viewBox="0 0 282.00390625 320" aria-labelledby="form-state-chart" class="css-gpkyxx"><title id="form-state-chart">State chart describing form states and transitions</title><style>#mermaid-1596401273945 .label{font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-1596401273945 .label text{fill:#333}#mermaid-1596401273945 .node rect,#mermaid-1596401273945 .node circle,#mermaid-1596401273945 .node ellipse,#mermaid-1596401273945 .node polygon,#mermaid-1596401273945 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1596401273945 .node .label{text-align:center;fill:#333}#mermaid-1596401273945 .node.clickable{cursor:pointer}#mermaid-1596401273945 .arrowheadPath{fill:#333}#mermaid-1596401273945 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1596401273945 .flowchart-link{stroke:#333;fill:none}#mermaid-1596401273945 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1596401273945 .edgeLabel rect{opacity:0.9}#mermaid-1596401273945 .edgeLabel span{color:#333}#mermaid-1596401273945 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1596401273945 .cluster text{fill:#333}#mermaid-1596401273945 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1596401273945 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1596401273945 text.actor&amp;gt;tspan{fill:#000;stroke:none}#mermaid-1596401273945 .actor-line{stroke:grey}#mermaid-1596401273945 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-1596401273945 .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-1596401273945 #arrowhead path{fill:#333;stroke:#333}#mermaid-1596401273945 .sequenceNumber{fill:#fff}#mermaid-1596401273945 #sequencenumber{fill:#333}#mermaid-1596401273945 #crosshead path{fill:#333;stroke:#333}#mermaid-1596401273945 .messageText{fill:#333;stroke:#333}#mermaid-1596401273945 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1596401273945 .labelText,#mermaid-1596401273945 .labelText&amp;gt;tspan{fill:#000;stroke:none}#mermaid-1596401273945 .loopText,#mermaid-1596401273945 .loopText&amp;gt;tspan{fill:#000;stroke:none}#mermaid-1596401273945 .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-1596401273945 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1596401273945 .noteText,#mermaid-1596401273945 .noteText&amp;gt;tspan{fill:#000;stroke:none}#mermaid-1596401273945 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1596401273945 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1596401273945 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1596401273945 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .section{stroke:none;opacity:0.2}#mermaid-1596401273945 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1596401273945 .section2{fill:#fff400}#mermaid-1596401273945 .section1,#mermaid-1596401273945 .section3{fill:#fff;opacity:0.2}#mermaid-1596401273945 .sectionTitle0{fill:#333}#mermaid-1596401273945 .sectionTitle1{fill:#333}#mermaid-1596401273945 .sectionTitle2{fill:#333}#mermaid-1596401273945 .sectionTitle3{fill:#333}#mermaid-1596401273945 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1596401273945 .grid .tick text{font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .grid path{stroke-width:0}#mermaid-1596401273945 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1596401273945 .task{stroke-width:2}#mermaid-1596401273945 .taskText{text-anchor:middle;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .taskText:not([font-size]){font-size:11px}#mermaid-1596401273945 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1596401273945 .task.clickable{cursor:pointer}#mermaid-1596401273945 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1596401273945 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1596401273945 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1596401273945 .taskText0,#mermaid-1596401273945 .taskText1,#mermaid-1596401273945 .taskText2,#mermaid-1596401273945 .taskText3{fill:#fff}#mermaid-1596401273945 .task0,#mermaid-1596401273945 .task1,#mermaid-1596401273945 .task2,#mermaid-1596401273945 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1596401273945 .taskTextOutside0,#mermaid-1596401273945 .taskTextOutside2{fill:#000}#mermaid-1596401273945 .taskTextOutside1,#mermaid-1596401273945 .taskTextOutside3{fill:#000}#mermaid-1596401273945 .active0,#mermaid-1596401273945 .active1,#mermaid-1596401273945 .active2,#mermaid-1596401273945 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1596401273945 .activeText0,#mermaid-1596401273945 .activeText1,#mermaid-1596401273945 .activeText2,#mermaid-1596401273945 .activeText3{fill:#000 !important}#mermaid-1596401273945 .done0,#mermaid-1596401273945 .done1,#mermaid-1596401273945 .done2,#mermaid-1596401273945 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1596401273945 .doneText0,#mermaid-1596401273945 .doneText1,#mermaid-1596401273945 .doneText2,#mermaid-1596401273945 .doneText3{fill:#000 !important}#mermaid-1596401273945 .crit0,#mermaid-1596401273945 .crit1,#mermaid-1596401273945 .crit2,#mermaid-1596401273945 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1596401273945 .activeCrit0,#mermaid-1596401273945 .activeCrit1,#mermaid-1596401273945 .activeCrit2,#mermaid-1596401273945 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1596401273945 .doneCrit0,#mermaid-1596401273945 .doneCrit1,#mermaid-1596401273945 .doneCrit2,#mermaid-1596401273945 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1596401273945 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1596401273945 .milestoneText{font-style:italic}#mermaid-1596401273945 .doneCritText0,#mermaid-1596401273945 .doneCritText1,#mermaid-1596401273945 .doneCritText2,#mermaid-1596401273945 .doneCritText3{fill:#000 !important}#mermaid-1596401273945 .activeCritText0,#mermaid-1596401273945 .activeCritText1,#mermaid-1596401273945 .activeCritText2,#mermaid-1596401273945 .activeCritText3{fill:#000 !important}#mermaid-1596401273945 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 g.classGroup text{fill:#9370db;stroke:none;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1596401273945 g.classGroup text .title{font-weight:bolder}#mermaid-1596401273945 g.clickable{cursor:pointer}#mermaid-1596401273945 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1596401273945 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1596401273945 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1596401273945 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1596401273945 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1596401273945 .dashed-line{stroke-dasharray:3}#mermaid-1596401273945 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1596401273945 .commit-id,#mermaid-1596401273945 .commit-msg,#mermaid-1596401273945 .branch-label{fill:lightgrey;color:lightgrey;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .slice{font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-1596401273945 g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-1596401273945 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1596401273945 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1596401273945 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1596401273945 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1596401273945 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1596401273945 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1596401273945 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1596401273945 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1596401273945 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-1596401273945 .edgeLabel text{fill:#333}#mermaid-1596401273945 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&#x27;trebuchet ms&#x27;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1596401273945 .node circle.state-start{fill:black;stroke:black}#mermaid-1596401273945 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1596401273945 #statediagram-barbEnd{fill:#9370db}#mermaid-1596401273945 .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1596401273945 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1596401273945 .statediagram-state .divider{stroke:#9370db}#mermaid-1596401273945 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1596401273945 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1596401273945 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1596401273945 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1596401273945 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1596401273945 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1596401273945 .note-edge{stroke-dasharray:5}#mermaid-1596401273945 .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: &#x27;&quot;trebuchet ms&quot;, verdana, arial&#x27;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}#mermaid-1596401273945 .error-icon{fill:#522}#mermaid-1596401273945 .error-text{fill:#522;stroke:#522}#mermaid-1596401273945 .edge-thickness-normal{stroke-width:2px}#mermaid-1596401273945 .edge-thickness-thick{stroke-width:3.5px}#mermaid-1596401273945 .edge-pattern-solid{stroke-dasharray:0}#mermaid-1596401273945 .edge-pattern-dashed{stroke-dasharray:3}#mermaid-1596401273945 .edge-pattern-dotted{stroke-dasharray:2}#mermaid-1596401273945 .marker{fill:#333}#mermaid-1596401273945 .marker.cross{stroke:#333}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}</style><style>#mermaid-1596401273945 {
    color: rgb(0, 0, 0);
    font: 16px &quot;trebuchet ms&quot;, verdana, arial;
  }</style><g><defs><marker id="statediagram-barbEnd" refX="19" refY="7" markerWidth="20" markerHeight="14" markerUnits="0" orient="auto"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M99.48046875,22L99.48046875,26.166666666666668C99.48046875,30.333333333333332,99.48046875,38.666666666666664,99.48046875,47C99.48046875,55.333333333333336,99.48046875,63.666666666666664,99.48046875,67.83333333333333L99.48046875,72" id="edge0" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M131.92578125,81.40658946689133L138.62456597222223,79.83882455574278C145.32335069444446,78.27105964459422,158.72092013888889,75.1355298222971,167.09440104166666,73.56776491114856C175.46788194444446,72,178.81727430555554,72,182.16666666666666,74.83333333333333C185.51605902777774,77.66666666666667,188.86545138888889,83.33333333333333,188.86545138888889,89C188.86545138888889,94.66666666666667,185.51605902777774,100.33333333333333,182.16666666666666,103.16666666666667C178.81727430555554,106,175.46788194444446,106,167.09440104166666,104.43223508885144C158.72092013888889,102.8644701777029,145.32335069444446,99.72894035540578,138.62456597222223,98.16117544425721L131.92578125,96.59341053310867" id="edge1" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M131.92578125,84.20362779954256L145.68446180555554,82.16968983295213C159.44314236111111,80.1357518663617,186.9605034722222,76.06787593318086,204.15885416666666,74.03393796659043C221.3572048611111,72,228.2365451388889,72,235.11588541666666,74.83333333333333C241.99522569444446,77.66666666666667,248.87456597222226,83.33333333333333,248.87456597222226,89C248.87456597222226,94.66666666666667,241.99522569444446,100.33333333333333,235.11588541666666,103.16666666666667C228.2365451388889,106,221.3572048611111,106,204.15885416666666,103.96606203340957C186.9605034722222,101.93212406681914,159.44314236111111,97.86424813363828,145.68446180555554,95.83031016704787L131.92578125,93.79637220045744" id="edge2" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M84.30244993932038,106L79.16870828276699,111.75C74.03496662621359,117.5,63.767483313106794,129,58.63374165655339,140.5C53.5,152,53.5,163.5,53.5,169.25L53.5,175" id="edge3" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M53.5,209L53.5,214.75C53.5,220.5,53.5,232,57.35412242111651,243.5C61.20824484223301,255,68.91648968446601,266.5,72.77061210558253,272.25L76.62473452669903,278" id="edge4" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M94.47072208737865,209L108.32846632281553,214.75C122.18621055825243,220.5,149.9016990291262,232,167.8045926881068,243.5C185.70748634708738,255,193.79778519417474,266.5,197.84293461771847,272.25L201.88808404126215,278" id="edge5" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M103.19755006067962,278L108.33129171723301,272.25C113.46503337378641,266.5,123.73251668689322,255,128.86625834344662,240.66666666666666C134,226.33333333333334,134,209.16666666666666,134,192C134,174.83333333333334,134,157.66666666666666,130.1458775788835,143.33333333333334C126.29175515776699,129,118.58351031553399,117.5,114.72938789441747,111.75L110.87526547330097,106" id="edge6" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path><path d="M222.6558328276699,278L225.63506902305826,272.25C228.6143052184466,266.5,234.5727776092233,255,237.55201380461165,240.66666666666666C240.53125,226.33333333333334,240.53125,209.16666666666666,240.53125,192C240.53125,174.83333333333334,240.53125,157.66666666666666,222.43033854166666,142.4743877334367C204.32942708333334,127.28210880020679,168.12760416666666,114.06421760041356,150.02669270833334,107.45527200051696L131.92578125,100.84632640062034" id="edge7" class=" edge-thickness-normal transition" marker-end="url(#statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(192.21484375, 89)"><g class="label" transform="translate(-25.2890625, -9.5)"><rect rx="0" ry="0" width="50.578125" height="19" style="fill:#e8e8e8"></rect><foreignObject width="50.578125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">change</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(255.75390625, 89)"><g class="label" transform="translate(-18.25, -9.5)"><rect rx="0" ry="0" width="36.5" height="19" style="fill:#e8e8e8"></rect><foreignObject width="36.5" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">reset</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(53.5, 140.5)"><g class="label" transform="translate(-24.1640625, -9.5)"><rect rx="0" ry="0" width="48.328125" height="19" style="fill:#e8e8e8"></rect><foreignObject width="48.328125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">submit</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(53.5, 243.5)"><g class="label" transform="translate(-25.6484375, -9.5)"><rect rx="0" ry="0" width="51.296875" height="19" style="fill:#e8e8e8"></rect><foreignObject width="51.296875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">resolve</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(177.6171875, 243.5)"><g class="label" transform="translate(-21.90625, -9.5)"><rect rx="0" ry="0" width="43.8125" height="19" style="fill:#e8e8e8"></rect><foreignObject width="43.8125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">reject</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="root_start" transform="translate(99.48046875, 15)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node statediagram-state" id="editing" transform="translate(99.48046875, 89)"><rect class="basic label-container" x="-32.4453125" y="-17" width="64.890625" height="34"></rect><g class="label" transform="translate(-24.9453125, -9.5)"><foreignObject width="49.890625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="nodeLabel">editing</span></div></foreignObject></g></g><g class="node statediagram-state" id="submitting" transform="translate(53.5, 192)"><rect class="basic label-container" x="-45.5" y="-17" width="91" height="34"></rect><g class="label" transform="translate(-38, -9.5)"><foreignObject width="76" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="nodeLabel">submitting</span></div></foreignObject></g></g><g class="node statediagram-state" id="resolved" transform="translate(88.01953125, 295)"><rect class="basic label-container" x="-37.6015625" y="-17" width="75.203125" height="34"></rect><g class="label" transform="translate(-30.1015625, -9.5)"><foreignObject width="60.203125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="nodeLabel">resolved</span></div></foreignObject></g></g><g class="node statediagram-state" id="rejected" transform="translate(213.84765625, 295)"><rect class="basic label-container" x="-38.2265625" y="-17" width="76.453125" height="34"></rect><g class="label" transform="translate(-30.7265625, -9.5)"><foreignObject width="61.453125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="nodeLabel">rejected</span></div></foreignObject></g></g></g></g></g></svg><p class="css-0">Our state chart has four states‚Äîediting, submitting, resolved, rejected‚Äîwith
clear transitions defined among the states, e.g. we transition from <code class="language-text css-0">editing</code> to
<code class="language-text css-0">submitting</code> state by performing the <code class="language-text css-0">submit</code> action.</p><h3 id="initial-hook-state" style="position:relative" class="css-0">Initial Hook State<a href="#initial-hook-state" aria-label="initial hook state permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><p class="css-0">First let‚Äôs establish what our <code class="language-text css-0">useReducer</code> hook state looks like. Note that the
hook state is different than the state of a state chart. Our hook state looks
like:</p><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token string">&quot;editing&quot;</span><span class="token punctuation">,</span>

  context<span class="token operator">:</span> <span class="token punctuation">{</span>
    previousValue<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    isValid<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    submitAllowed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    isSuccessful<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">The <code class="language-text css-0">value</code> entry holds our state chart state. We also have a separate <code class="language-text css-0">context</code>
entry that keeps track of the <a href="https://en.wikipedia.org/wiki/UML_state_machine#Extended_states" class="css-0">extended state</a>.</p><h3 id="translate-a-state-chart-to-a-reducer-function" style="position:relative" class="css-0">Translate a State Chart to a Reducer Function<a href="#translate-a-state-chart-to-a-reducer-function" aria-label="translate a state chart to a reducer function permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="gatsby-highlight has-highlighted-lines css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> context <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">case</span> <span class="token string">&quot;editing&quot;</span><span class="token operator">:</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>        <span class="token keyword">case</span> <span class="token string">&quot;change&quot;</span><span class="token operator">:</span>
          <span class="token keyword">const</span> isValid <span class="token operator">=</span> <span class="token regex">/^[A-Za-z]*$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> submitAllowed <span class="token operator">=</span> isValid <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>previousValue <span class="token operator">!==</span> payload<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            value<span class="token punctuation">,</span>
            context<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>context<span class="token punctuation">,</span> value<span class="token operator">:</span> payload<span class="token punctuation">,</span> isValid<span class="token punctuation">,</span> submitAllowed <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token string">&quot;reset&quot;</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            value<span class="token punctuation">,</span>
            context<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token operator">...</span>context<span class="token punctuation">,</span>
              value<span class="token operator">:</span> context<span class="token punctuation">.</span>previousValue<span class="token punctuation">,</span>
              isValid<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              submitAllowed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">        <span class="token keyword">case</span> <span class="token string">&quot;submit&quot;</span><span class="token operator">:</span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>submitAllowed<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;submitting&quot;</span><span class="token punctuation">,</span> context <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
        <span class="token keyword">default</span><span class="token operator">:</span>
          <span class="token keyword">return</span> state<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&quot;submitting&quot;</span><span class="token operator">:</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;resolve&quot;</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;resolved&quot;</span><span class="token punctuation">,</span> context <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;reject&quot;</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">,</span> context <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
          <span class="token keyword">return</span> state<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&quot;resolved&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token string">&quot;editing&quot;</span><span class="token punctuation">,</span>
        context<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>context<span class="token punctuation">,</span>
          previousValue<span class="token operator">:</span> context<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
          isSuccessful<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          submitAllowed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">case</span> <span class="token string">&quot;rejected&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token string">&quot;editing&quot;</span><span class="token punctuation">,</span>
        context<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>context<span class="token punctuation">,</span>
          isSuccessful<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">Notice the top level <code class="language-text css-0">switch</code> is based on the <code class="language-text css-0">state.value</code> (state chart state)
expression. For <code class="language-text css-0">editing</code> and <code class="language-text css-0">submitting</code> states, we further switch on
<code class="language-text css-0">action.type</code> (state chart transition). Why do we do this? This guarantees that,
for example, the <code class="language-text css-0">submit</code> transition is only valid if our state chart is in the
<code class="language-text css-0">editing</code> state. Practically, this means that if the form is in the <code class="language-text css-0">submitting</code>
state, it can‚Äôt be submitted again no matter how hard we try (we‚Äôve just solved
the multiple button click issue, even if we forget to disable the submit
button).</p><p class="css-0">If you compare the code to the diagram, you‚Äôll see that each <code class="language-text css-0">case</code> clause
corresponds to a transition‚Äîseven transitions, seven <code class="language-text css-0">case</code> clauses that return
the next state.</p><p class="css-0">Notice the <code class="language-text css-0">default</code> clauses always return the original state as-is. This is
generally how state machines work‚Äîif you try to specify an illegal transition,
the state remains as-is.</p><p class="css-0">Looking at each <code class="language-text css-0">case</code> clause, you‚Äôll notice that we‚Äôre performing couple tasks:</p><ol class="css-0"><li class="css-0">Specify the next state by changing <code class="language-text css-0">state.value</code>.</li><li class="css-0">Changing <code class="language-text css-0">state.context</code> as appropriate for a given transition.</li></ol><h3 id="putting-it-all-together" style="position:relative" class="css-0">Putting It All Together<a href="#putting-it-all-together" aria-label="putting it all together permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="gatsby-highlight css-0" data-language="js"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers css-0"><code class="language-js css-0"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> transitions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">change</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;reset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">submit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;submit&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p class="css-0">To start transitions, we use the <code class="language-text css-0">dispatch()</code> function from the <code class="language-text css-0">useReducer</code>
hook. Transitions can be manually triggered (user clicking a button) via event
handlers, or automatically triggered (when state changes) via <code class="language-text css-0">useEffect</code>.</p><p class="css-0">Complex state charts topics are beyond the scope of this article. What we‚Äôre
demonstrating here is that you can in fact model fairly complex systems (if
somewhat awkwardly) using reducers.</p><h3>üë©‚Äçüíª Try It Out</h3><p><button>Load CodeSandbox</button></p><p class="css-0">If you‚Äôre curious about state charts, I highly recommend checking out
<a href="https://xstate.js.org/docs/" class="css-0">XState</a>.</p><h2 id="takeaways" style="position:relative" class="css-0">Takeaways<a href="#takeaways" aria-label="takeaways permalink" class="header-link after css-0"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><ul class="css-0"><li class="css-0">Use <code class="language-text css-0">React.useReducer</code> when you need to keep track of multiple tightly-coupled
state values.</li><li class="css-0">Reducers are capable of modeling complex systems.</li><li class="css-0">Consider making your <code class="language-text css-0">useReducer</code> hook more user friendly with action
creators.</li></ul><p class="css-0">As we‚Äôve seen in this series of articles, <code class="language-text css-0">useReducer</code> is a hook pattern capable
of solving a wide variety of simple to moderately complicated problems. Now that
the scariest part of the pattern‚Äîreducers‚Äîis less scary, I hope you‚Äôll reach for
it more frequently, with creativity.</p><ul class="css-0"><li class="css-0"><a href="/articles/reducer-patterns/part-1/" class="css-0">Part 1: Introduction to <code class="language-text css-0">useReducer</code> and basic reducer patterns</a></li><li class="css-0"><a href="/articles/reducer-patterns/part-2/" class="css-0">Part 2: Reducers with actions</a></li></ul></article></main><style data-emotion-css="csu1tk">.css-csu1tk{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--theme-ui-colors-font-body-0,hsl(194,14%,40%));display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:1rem;margin-top:0.5rem;}</style><footer class="css-csu1tk"><style data-emotion-css="g7vnnf">.css-g7vnnf{color:var(--theme-ui-colors-font-body-0,hsl(194,14%,40%));padding-top:0.75rem;padding-bottom:0.75rem;}</style><a class="link-hover css-g7vnnf" aria-label="Return to homepage" href="/">George Song ¬© <!-- -->2020</a><style data-emotion-css="qwzfgi">.css-qwzfgi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.25rem;}@media (min-width:470px){.css-qwzfgi{margin-left:auto;}}</style><div class="css-qwzfgi"><style data-emotion-css="1eldp9m">.css-1eldp9m{color:var(--theme-ui-colors-font-body-0,hsl(194,14%,40%));}</style><a href="https://twitter.com/zukefresh" aria-label="Visit my Twitter" class="link-hover css-1eldp9m"><style data-emotion-css="1nllhmg">.css-1nllhmg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:48px;width:48px;}</style><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 512 512" width="1em" height="1em"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></div></a><a href="mailto:george@gsong.dev?subject=React.useReducer%20Reducer%20Patterns%2C%20Part%203" aria-label="Email me" class="link-hover css-1eldp9m"><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 512 512" width="1em" height="1em"><path fill="currentColor" d="M494.59 164.52c-1.52-1.26-13.86-11.2-30.59-24.66V96c0-26.51-21.49-48-48-48h-66.13C327.24 28.85 293.77 0 256 0c-37.65 0-70.9 28.63-93.85 48H96c-26.51 0-48 21.49-48 48v43.85c-16.81 13.52-29.15 23.46-30.48 24.56A48.002 48.002 0 000 201.48V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V201.51c0-14.31-6.38-27.88-17.41-36.99zM96 96h320v156.66c-36.26 29.32-78.69 63.67-86.59 69.95C311.25 337.12 279.6 368 256 368c-23.69 0-55.86-31.37-73.41-45.39-7.9-6.28-50.33-40.64-86.59-69.97V96zm368 362c0 3.31-2.69 6-6 6H54c-3.31 0-6-2.69-6-6V275.56c38.96 31.48 95.95 77.65 104.66 84.58C174.71 377.76 212.55 416 256 416c43.21 0 80.64-37.72 103.34-55.86 9-7.15 65.84-53.19 104.66-84.56V458zM176 192h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm176 64v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16z"></path></svg></div></a><a href="https://github.com/gsong/personal-site" aria-label="Visit my GitHub" class="link-hover css-1eldp9m"><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 496 512" height="calc(1em*16/14)" width="calc(1em*16/14)"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></div></a><a href="https://www.instagram.com/zukefresh/" aria-label="Visit my Instagram" class="link-hover css-1eldp9m"><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 448 512" height="calc(1em*16/14)" width="calc(1em*16/14)"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></div></a><a href="https://www.linkedin.com/in/gsong/" aria-label="Visit my LinkedIn" class="link-hover css-1eldp9m"><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 448 512" height="calc(1em*16/14)" width="calc(1em*16/14)"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></div></a><a href="/articles/rss.xml" aria-label="Subscribe to My RSS Feed" class="link-hover css-1eldp9m"><div class="css-1nllhmg"><svg aria-hidden="true" viewBox="0 0 448 512" height="calc(1em*16/14)" width="calc(1em*16/14)"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></div></a></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-22541040-3', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/reducer-patterns/part-3/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7c1dc33d6e1f943b2f39.js"],"app":["/app-85062645ae4eb1e74666.js"],"component---content-articles-reducer-patterns-dispatch-flow-js":[],"component---content-articles-reducer-patterns-form-state-chart-js":[],"component---content-articles-reducer-patterns-part-1-mdx":["/component---content-articles-reducer-patterns-part-1-mdx-ab13334fe529a8418171.js"],"component---content-articles-reducer-patterns-part-2-mdx":["/component---content-articles-reducer-patterns-part-2-mdx-48bc3d138b154f306b44.js"],"component---content-articles-reducer-patterns-part-3-mdx":["/component---content-articles-reducer-patterns-part-3-mdx-d64d9e4b510e3a91e7df.js"],"component---content-articles-reducer-patterns-set-state-flow-js":[],"component---content-articles-remove-unwanted-properties-index-mdx":["/component---content-articles-remove-unwanted-properties-index-mdx-c8a366d31733ef174295.js"],"component---content-articles-to-locale-date-string-index-mdx":["/component---content-articles-to-locale-date-string-index-mdx-1fd57fbe705249e4fb8b.js"],"component---src-pages-404-mdx":["/component---src-pages-404-mdx-78965a4bd85093474cc6.js"],"component---src-pages-drafts-colophon-mdx":["/component---src-pages-drafts-colophon-mdx-7edbe68dfbea1e5dc650.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-e759765224108e4e7790.js"]};/*]]>*/</script><script src="/polyfill-7c1dc33d6e1f943b2f39.js" nomodule=""></script><script src="/component---content-articles-reducer-patterns-part-3-mdx-d64d9e4b510e3a91e7df.js" async=""></script><script src="/app-85062645ae4eb1e74666.js" async=""></script><script src="/styles-24c541b6ac347bae38f1.js" async=""></script><script src="/webpack-runtime-819ee5be2e0c92db4d23.js" async=""></script></body></html>